package com.interview.pbasu.test.controller;

import java.util.Calendar;
import java.util.UUID;

import org.junit.Test;
import org.junit.runner.RunWith;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.autoconfigure.web.servlet.WebMvcTest;
import org.springframework.boot.test.mock.mockito.MockBean;
import org.springframework.test.context.junit4.SpringRunner;
import org.springframework.test.web.servlet.MockMvc;

import com.interview.pbasu.controller.ProductApiController;
import com.interview.pbasu.domain.Product;
import com.interview.pbasu.service.ProductApiService;

@RunWith(SpringRunner.class)
@WebMvcTest(value = ProductApiController.class)
public class ProductApiControllerTest {

	@Autowired
    private MockMvc mvc;
 
    @MockBean
    private ProductApiService productSrvice;
    
    Calendar cal = Calendar.getInstance();
    Product mockProduct = new Product(UUID.randomUUID(), "MOCKADREDSHTM123", "MOCKRed Checked Shirt", "MOCKShirt", "MOCKAdidas", 23.49f, "RED", "L", "MOCKBizTraders", cal.getTime(), false, "available");

	String exampleCourseJson = "{\"name\":\"Spring\",\"description\":\"10Steps\",\"steps\":[\"Learn Maven\",\"Import Project\",\"First Example\",\"Second Example\"]}";
	
	@Test
	public void checkReturnType()
	  throws Exception {
	    
		Product product = new Product(UUID.randomUUID(), "MOCKADREDSHTM123", "MOCKRed Checked Shirt", "MOCKShirt", "MOCKAdidas", 23.49f, "RED", "L", "MOCKBizTraders", cal.getTime(), false, "available");
	 
	    List<Employee> allEmployees = Arrays.asList(alex);
	 
	    given(service.getAllEmployees()).willReturn(allEmployees);
	 
	    mvc.perform(get("/api/employees")
	      .contentType(MediaType.APPLICATION_JSON))
	      .andExpect(status().isOk())
	      .andExpect(jsonPath("$", hasSize(1)))
	      .andExpect(jsonPath("$[0].name", is(alex.getName())));
	}
	
}
